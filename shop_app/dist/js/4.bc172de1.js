(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"+VNE":function(e,i,t){},FMhu:function(e,i,t){},"Ky+U":function(e,i,t){"use strict";var s=t("+VNE"),c=t.n(s);c.a},LDNq:function(e,i,t){"use strict";var s=t("oji8"),c=t.n(s);c.a},aXde:function(e,i,t){"use strict";var s=t("FMhu"),c=t.n(s);c.a},oji8:function(e,i,t){},t4kb:function(e,i,t){"use strict";t.r(i);var s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"cart"},[e.loading?t("Loading",{staticClass:"isFooter"}):e._e(),e.loading?e._e():[t("AppHeader",{attrs:{title:"购物车"}}),t("van-cell-group",[t("van-cell",{attrs:{title:"登录后享受更多优惠","is-link":"",value:"去登录"}})],1),t("CartCell"),t("Recommend",{attrs:{title:e.recommend.title,recommendList:e.recommend.recommend_list}}),t("div",{staticClass:"footer"},[t("div",{staticClass:"item showPrice"},[t("p",[e._v("共"+e._s(e.productNum)+"件 金额：")]),t("p",[t("span",[e._v(e._s(e.productPrice))]),e._v("元")])]),t("div",{staticClass:"item goCategory"},[t("router-link",{attrs:{to:"/category"}},[e._v("继续购物")])],1),t("div",{staticClass:"item goPlay"},[t("router-link",{attrs:{to:"/login"}},[e._v("去结算")])],1)])]],2)},c=[],r=(t("ilju"),t("5B+z")),n=(t("8GqL"),t("IPst")),a=(t("wZRv"),t("d0T1")),o=(t("BlND"),t("NOlr")),m=t("Kw5r"),d=t("Ol7d"),u=t("pM6J"),_=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"cartCell"},[t("ol",e._l(e.productList,function(i,s){return t("li",{key:s},[t("div",{staticClass:"cartItem"},[t("div",{staticClass:"checkWrap"},[t("van-checkbox",{model:{value:i.is_checked,callback:function(t){e.$set(i,"is_checked",t)},expression:"item.is_checked"}})],1),t("div",{staticClass:"imgWrap"},[t("img",{attrs:{src:i.image_url}})]),t("div",{staticClass:"contentWrap"},[t("p",{staticClass:"name"},[e._v(e._s(i.product_name))]),t("p",{staticClass:"price"},[e._v("售价："+e._s(i.salePrice)+"元")]),t("div",{staticClass:"contral"},[t("van-stepper",{attrs:{integer:"","default-value":i.num,min:1,max:i.goodsNum},model:{value:i.num,callback:function(t){e.$set(i,"num",t)},expression:"item.num"}}),t("van-icon",{attrs:{name:"delete"},on:{click:function(i){e.delProduct(s)}}})],1)])]),i.is_checked?t("div",{staticClass:"other",class:{isServe:e.isServe[s].is_checked}},[e._l(i.service_bargins,function(c,r){return e.isServe[s].is_checked?t("div",{key:r+"servePruduct"},e._l(c.service_info,function(c){return t("div",{key:c.service_goods_id,staticClass:"servePruduct"},[t("div",{staticClass:"imgWrap"},[t("img",{attrs:{src:c.service_image_url}})]),t("div",{staticClass:"contentWrap"},[t("p",{staticClass:"name"},[e._v(e._s(c.service_name))]),t("p",{staticClass:"price"},[e._v("售价："+e._s(c.service_price)+"元")]),t("div",{staticClass:"contral"},[t("van-stepper",{attrs:{integer:"",min:1,"default-value":i.serveNum,max:i.num},model:{value:i.serveNum,callback:function(t){e.$set(i,"serveNum",t)},expression:"item.serveNum"}}),t("van-icon",{attrs:{name:"delete"},on:{click:function(i){e.hideServeProduct(s)}}})],1)])])})):e._e()}),e._l(i.actives,function(s,c){return i.actives?t("div",{key:c,staticClass:"gift"},[t("div",{staticClass:"imgWrap"},[t("img",{attrs:{src:s.imgUrl}})]),t("div",{staticClass:"contentWrap"},[t("p",{staticClass:"name"},[e._v(e._s(s.title))]),t("div",{staticClass:"contral"},[t("van-stepper",{attrs:{disabled:"","default-value":i.num},model:{value:i.num,callback:function(t){e.$set(i,"num",t)},expression:"item.num"}})],1)])]):e._e()})],2):e._e(),e._l(i.service_bargins,function(c){return i.is_checked&&!e.isServe[s].is_checked?t("div",{key:c.active_id},e._l(c.service_info,function(i){return t("div",{key:i.phone_accidentIns_sku,staticClass:"serve"},[t("img",{attrs:{src:i.service_image_url}}),t("p",{staticClass:"name"},[e._v(e._s(i.service_short_name)+" "+e._s(i.service_price))]),t("p",{staticClass:"checked",on:{click:function(i){e.choseServe(c,s)}}},[e._v("选购")])])})):e._e()})],2)})),t("van-popup",{attrs:{position:"bottom"},model:{value:e.isPopupShow,callback:function(i){e.isPopupShow=i},expression:"isPopupShow"}},[t("div",{staticClass:"popup"},[t("van-icon",{attrs:{name:"close"},on:{click:e.close}}),t("h2",[e._v("购买服务")]),t("SkuServe",{attrs:{serviceBargins:e.thisServe}}),t("div",{staticClass:"footer"},[e.choose?e._e():t("div",{staticClass:"item text"},[e._v("请选择服务类型")]),e.choose?t("div",{staticClass:"item text"},[e._v("已选择"+e._s(e.thisServe.length)+"项服务")]):e._e(),t("div",{staticClass:"item btn",on:{click:e.showServeProduct}},[e._v("确定")])])],1)])],1)},l=[],p=(t("rGqo"),t("PDIE"),t("QX6E")),v=(t("VRzm"),[{is_checked:!0,goodsId:"2181500042",image_url:"//i1.mifile.cn/a1/pms_1524621358.15368619!180x1800.jpg",num:1,goodsNum:2,product_name:"小米6X 全网通版 6GB内存 128GB 冰川蓝 128GB",salePrice:"1999",serveNum:0,service_bargins:[{can_multi:!0,service_info:[{act_diff:"",act_id:"",act_price:"",goods_id:2181500027,goods_name:"小米6X 4GB+64GB 曜石黑",item_id:"",new_insurance_cat:!0,phone_accidentIns:[{desc:"服务条款",url:"https://order.mi.com/static/jrUrl?url=https%3A%2F%2Fapi.jr.mi.com%2Finsurance%2Fdocument%2Fphone_accidentIns.html%3Ffrom%3Dins_phonedetail_bxtk%26insuranceSku%3D19411%26couponFrom%3Drule"},{desc:"常见问题",url:"https://order.mi.com/static/jrUrl?url=https%3A%2F%2Fapi.jr.mi.com%2Finsurance%2Fdocument%2Fphone_accidentIns.html%3Ffrom%3Dins_phonedetail_cjwt%26insuranceSku%3D19411%26couponFrom%3Dquestion"}],phone_accidentIns_sku:"19411",service_desc:"手机意外摔落/进水/碾压等损坏",service_goods_id:"2181600004",service_image_url:"//i1.mifile.cn/a1/pms_1524032278.1757986.jpg",service_name:"小米6X 意外保障服务",service_price:"179",service_short_name:"意外保障服务",service_url:"https://cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html",source:"common"}],service_url:"https://cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html",type_name:"保障服务"}],actives:[{type:"gift",type_desc:"赠品",title:"新小米移动电源2 (10000mAh) 黑色",active_id:"11110",imgUrl:"//i1.mifile.cn/a1/pms_1513948456.57461422.jpg"}]},{is_checked:!0,goodsId:"2181500042",image_url:"//i1.mifile.cn/a1/pms_1524621358.15368619!180x1800.jpg",num:1,goodsNum:2,product_name:"小米6X 全网通版 6GB内存 128GB 冰川蓝 128GB",salePrice:"1999",serveNum:0,service_bargins:[{can_multi:!0,service_info:[{act_diff:"",act_id:"",act_price:"",goods_id:2181500027,goods_name:"小米6X 4GB+64GB 曜石黑",item_id:"",new_insurance_cat:!0,phone_accidentIns:[{desc:"服务条款",url:"https://order.mi.com/static/jrUrl?url=https%3A%2F%2Fapi.jr.mi.com%2Finsurance%2Fdocument%2Fphone_accidentIns.html%3Ffrom%3Dins_phonedetail_bxtk%26insuranceSku%3D19411%26couponFrom%3Drule"},{desc:"常见问题",url:"https://order.mi.com/static/jrUrl?url=https%3A%2F%2Fapi.jr.mi.com%2Finsurance%2Fdocument%2Fphone_accidentIns.html%3Ffrom%3Dins_phonedetail_cjwt%26insuranceSku%3D19411%26couponFrom%3Dquestion"}],phone_accidentIns_sku:"19411",service_desc:"手机意外摔落/进水/碾压等损坏",service_goods_id:"2181600004",service_image_url:"//i1.mifile.cn/a1/pms_1524032278.1757986.jpg",service_name:"小米6X 意外保障服务",service_price:"179",service_short_name:"意外保障服务",service_url:"https://cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html",source:"common"}],service_url:"https://cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html",type_name:"保障服务"}],actives:[{type:"gift",type_desc:"赠品",title:"新小米移动电源2 (10000mAh) 黑色",active_id:"11110",imgUrl:"//i1.mifile.cn/a1/pms_1513948456.57461422.jpg"}]},{is_checked:!0,goodsId:"2181500042",image_url:"//i1.mifile.cn/a1/pms_1524621358.15368619!180x1800.jpg",num:1,goodsNum:2,product_name:"小米6X 全网通版 6GB内存 128GB 冰川蓝 128GB",salePrice:"1999",serveNum:0,service_bargins:[{can_multi:!0,service_info:[{act_diff:"",act_id:"",act_price:"",goods_id:2181500027,goods_name:"小米6X 4GB+64GB 曜石黑",item_id:"",new_insurance_cat:!0,phone_accidentIns:[{desc:"服务条款",url:"https://order.mi.com/static/jrUrl?url=https%3A%2F%2Fapi.jr.mi.com%2Finsurance%2Fdocument%2Fphone_accidentIns.html%3Ffrom%3Dins_phonedetail_bxtk%26insuranceSku%3D19411%26couponFrom%3Drule"},{desc:"常见问题",url:"https://order.mi.com/static/jrUrl?url=https%3A%2F%2Fapi.jr.mi.com%2Finsurance%2Fdocument%2Fphone_accidentIns.html%3Ffrom%3Dins_phonedetail_cjwt%26insuranceSku%3D19411%26couponFrom%3Dquestion"}],phone_accidentIns_sku:"19411",service_desc:"手机意外摔落/进水/碾压等损坏",service_goods_id:"2181600004",service_image_url:"//i1.mifile.cn/a1/pms_1524032278.1757986.jpg",service_name:"小米6X 意外保障服务",service_price:"179",service_short_name:"意外保障服务",service_url:"https://cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html",source:"common"}],service_url:"https://cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html",type_name:"保障服务"}],actives:[{type:"gift",type_desc:"赠品",title:"新小米移动电源2 (10000mAh) 黑色",active_id:"11110",imgUrl:"//i1.mifile.cn/a1/pms_1513948456.57461422.jpg"}]},{is_checked:!0,goodsId:"2181500042",image_url:"//i1.mifile.cn/a1/pms_1524621358.15368619!180x1800.jpg",num:1,product_name:"小米6X 全网通版 6GB内存 128GB 冰川蓝 128GB",salePrice:"1999",serveNum:0,service_bargins:[{can_multi:!0,service_info:[{act_diff:"",act_id:"",act_price:"",goods_id:2181500027,goods_name:"小米6X 4GB+64GB 曜石黑",item_id:"",new_insurance_cat:!0,phone_accidentIns:[{desc:"服务条款",url:"https://order.mi.com/static/jrUrl?url=https%3A%2F%2Fapi.jr.mi.com%2Finsurance%2Fdocument%2Fphone_accidentIns.html%3Ffrom%3Dins_phonedetail_bxtk%26insuranceSku%3D19411%26couponFrom%3Drule"},{desc:"常见问题",url:"https://order.mi.com/static/jrUrl?url=https%3A%2F%2Fapi.jr.mi.com%2Finsurance%2Fdocument%2Fphone_accidentIns.html%3Ffrom%3Dins_phonedetail_cjwt%26insuranceSku%3D19411%26couponFrom%3Dquestion"}],phone_accidentIns_sku:"19411",service_desc:"手机意外摔落/进水/碾压等损坏",service_goods_id:"2181600004",service_image_url:"//i1.mifile.cn/a1/pms_1524032278.1757986.jpg",service_name:"小米6X 意外保障服务",service_price:"179",service_short_name:"意外保障服务",service_url:"https://cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html",source:"common"}],service_url:"https://cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html",type_name:"保障服务"}],actives:[{type:"gift",type_desc:"赠品",title:"新小米移动电源2 (10000mAh) 黑色",active_id:"11110",imgUrl:"//i1.mifile.cn/a1/pms_1513948456.57461422.jpg"}]},{is_checked:!0,goodsId:"2181500042",image_url:"//i1.mifile.cn/a1/pms_1524621358.15368619!180x1800.jpg",num:1,goodsNum:2,product_name:"小米6X 全网通版 6GB内存 128GB 冰川蓝 128GB",salePrice:"1999",serveNum:0,service_bargins:[{can_multi:!0,service_info:[{act_diff:"",act_id:"",act_price:"",goods_id:2181500027,goods_name:"小米6X 4GB+64GB 曜石黑",item_id:"",new_insurance_cat:!0,phone_accidentIns:[{desc:"服务条款",url:"https://order.mi.com/static/jrUrl?url=https%3A%2F%2Fapi.jr.mi.com%2Finsurance%2Fdocument%2Fphone_accidentIns.html%3Ffrom%3Dins_phonedetail_bxtk%26insuranceSku%3D19411%26couponFrom%3Drule"},{desc:"常见问题",url:"https://order.mi.com/static/jrUrl?url=https%3A%2F%2Fapi.jr.mi.com%2Finsurance%2Fdocument%2Fphone_accidentIns.html%3Ffrom%3Dins_phonedetail_cjwt%26insuranceSku%3D19411%26couponFrom%3Dquestion"}],phone_accidentIns_sku:"19411",service_desc:"手机意外摔落/进水/碾压等损坏",service_goods_id:"2181600004",service_image_url:"//i1.mifile.cn/a1/pms_1524032278.1757986.jpg",service_name:"小米6X 意外保障服务",service_price:"179",service_short_name:"意外保障服务",service_url:"https://cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html",source:"common"}],service_url:"https://cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html",type_name:"保障服务"}],actives:[{type:"gift",type_desc:"赠品",title:"新小米移动电源2 (10000mAh) 黑色",active_id:"11110",imgUrl:"//i1.mifile.cn/a1/pms_1513948456.57461422.jpg"}]}]),h=t("mjIS"),f=t("9e9m");m["a"].use(n["a"]).use(p["a"]).use(r["a"]);var g={name:"cartCell",props:{},created:function(){var e=this;this.initData(),f["a"].$on("choose",function(i){e.choose=i})},components:{SkuServe:h["a"]},data:function(){return{productList:null,isPopupShow:!1,thisServe:[],choose:!1,isServe:[],curIndex:null,totalNum:0,totalPrice:0}},watch:{productList:{deep:!0,handler:function(e){var i=this,t=0,s=0;e.forEach(function(e,c){e.is_checked&&(e.actives?t+=e.num*(e.actives.length+1)+e.serveNum:t+=e.num+e.serveNum,i.isServe[c].is_checked?s+=e.num*e.salePrice+e.serveNum*i.isServe[c].servePrice:s+=e.num*e.salePrice)}),this.totalNum=t,this.totalPrice=s,f["a"].$emit("productNum",this.totalNum),f["a"].$emit("productPrice",this.totalPrice)}}},methods:{initData:function(){this.productList=v;for(var e=0;e<this.productList.length;e++)this.isServe.push({is_checked:!1})},close:function(){this.isPopupShow=!1},choseServe:function(e,i){this.thisServe=[],this.isPopupShow=!0,this.thisServe.push(e),this.isServe[i].servePrice=e.service_info[0].service_price,this.curIndex=i},showServeProduct:function(){this.isPopupShow=!1,this.isServe[this.curIndex].is_checked=!0,this.productList[this.curIndex].serveNum=1},hideServeProduct:function(e){this.isServe[e].is_checked=!1,this.productList[e].serveNum=0},delProduct:function(e){this.productList.splice(e,1)}}},F=g,k=(t("LDNq"),t("Ky+U"),t("KHd+")),j=Object(k["a"])(F,_,l,!1,null,"0739eb10",null),b=j.exports,S=t("5z/w");m["a"].use(a["a"]).use(o["a"]),m["a"].use(r["a"]).use(n["a"]);var C={name:"cart",components:{Loading:d["a"],AppHeader:u["a"],CartCell:b,Recommend:S["a"]},data:function(){return{loading:!0,recommend:null,productNum:0,productPrice:0}},beforeRouteEnter:function(e,i,t){t(f["a"].$emit("loading",!0))},created:function(){var e=this;this.$NProgress.start(),this.getCart(),f["a"].$on("productNum",function(i){e.productNum=i}),f["a"].$on("productPrice",function(i){e.productPrice=i})},destroyed:function(){this.$NProgress.remove()},methods:{getCart:function(){var e=this;this.$fetch("recommendList").then(function(i){e.recommend=i.data.recommend,e.$NProgress.done(),e.loading=!1}).catch(function(e){console.log(e)})}}},P=C,D=(t("aXde"),Object(k["a"])(P,s,c,!1,null,"cc25542c",null));i["default"]=D.exports}}]);
//# sourceMappingURL=4.bc172de1.js.map